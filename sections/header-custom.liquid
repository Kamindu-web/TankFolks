{% comment %}
  File: sections/header-custom.liquid
  Usage: Add this as a section, then set your menus/colors in the Theme Editor.
{% endcomment %}

<section class="pw-header" data-section-id="{{ section.id }}">
    <style>
      .pw-container{max-width:1200px;margin:0 auto;padding:0 16px;box-sizing:border-box}
      .pw-topbar{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:6px 0;font-size:12px;background:{{ section.settings.topbar_bg | default: 'transparent' }};color:{{ section.settings.topbar_text_color }}}
      .pw-topbar a{color:{{ section.settings.topbar_link_color }};text-decoration:none}
      .pw-topbar .pw-help{display:flex;gap:6px;align-items:center;flex-wrap:wrap}
      .pw-topbar .pw-upper-menu{display:flex;gap:14px;flex-wrap:wrap}
      .pw-topbar .pw-social{display:flex;gap:10px}
      .pw-social a{display:inline-flex;line-height:0}
  
      .pw-mid{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:10px 0}
      .pw-logo img{max-height:42px;width:auto}
      .pw-cta{display:flex;align-items:center;gap:18px}
      .pw-cta a{display:flex;align-items:center;gap:6px;color:{{ section.settings.mid_link_color }};text-decoration:none;font-size:13px}
      .pw-cta svg{width:18px;height:18px}
  
      .pw-mainnav{background:{{ section.settings.mainnav_bg_color }}}
      .pw-mainnav .pw-container{display:flex;align-items:center;justify-content:space-between}
      .pw-menu{display:flex;gap:22px;flex-wrap:wrap}
      .pw-menu a{color:{{ section.settings.mainnav_link_color }};text-decoration:none;font-weight:600;padding:12px 0;display:block}
      .pw-hamburger{display:none;background:none;border:0;padding:10px;margin:-10px;cursor:pointer}
      .pw-hamburger span{display:block;width:22px;height:2px;background:{{ section.settings.mainnav_link_color }};margin:5px 0}
  
      .pw-cart-count{min-width:16px;height:16px;border-radius:999px;font-size:11px;display:inline-flex;align-items:center;justify-content:center;padding:0 4px;background:{{ section.settings.cart_badge_bg }};color:{{ section.settings.cart_badge_color }}}
  
      /* Mobile */
      @media (max-width: 990px){
        .pw-topbar .pw-upper-menu{display:none}
        .pw-mid{gap:10px}
        .pw-menu{display:none;flex-direction:column;width:100%}
        .pw-mainnav .pw-container{flex-wrap:wrap}
        .pw-hamburger{display:inline-block}
        .pw-menu.show{display:flex}
        .pw-cta a span.label{display:none} /* hide text labels on mobile to keep compact */
      }
    </style>
  
    <!-- Top bar -->
    <div class="pw-topbar">
      <div class="pw-container">
        <div class="pw-topbar" style="background:none;padding:0">
          <div class="pw-help">
            {% if section.settings.help_text != blank %}
              <span>{{ section.settings.help_text }}</span>
            {% endif %}
            {% if section.settings.help_email != blank %}
              <a href="mailto:{{ section.settings.help_email }}">{{ section.settings.help_email }}</a>
            {% endif %}
          </div>
  
          <nav class="pw-upper-menu" aria-label="Upper menu">
            {% if section.settings.upper_menu != blank %}
              {% for link in linklists[section.settings.upper_menu].links %}
                <a href="{{ link.url }}">{{ link.title }}</a>
              {% endfor %}
            {% endif %}
          </nav>
  
          <div class="pw-social">
            {% if section.settings.facebook_url != blank %}
              <a href="{{ section.settings.facebook_url }}" aria-label="Facebook">
                <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M22 12.07C22 6.48 17.52 2 11.93 2S2 6.48 2 12.07c0 5 3.66 9.14 8.44 9.93v-7.02H7.9v-2.91h2.54V9.41c0-2.5 1.49-3.88 3.77-3.88 1.09 0 2.23.19 2.23.19v2.45h-1.26c-1.24 0-1.63.77-1.63 1.56v1.87h2.78l-.44 2.91h-2.34V22c4.78-.79 8.44-4.93 8.44-9.93z"/></svg>
              </a>
            {% endif %}
            {% if section.settings.instagram_url != blank %}
              <a href="{{ section.settings.instagram_url }}" aria-label="Instagram">
                <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3H7zm5 3.5A5.5 5.5 0 1 1 6.5 13 5.51 5.51 0 0 1 12 7.5zm0 2A3.5 3.5 0 1 0 15.5 13 3.5 3.5 0 0 0 12 9.5zm5.75-2.9a1.15 1.15 0 1 1-1.15 1.15 1.15 1.15 0 0 1 1.15-1.15z"/></svg>
              </a>
            {% endif %}
            {% if section.settings.x_url != blank %}
              <a href="{{ section.settings.x_url }}" aria-label="X">
                <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M18.9 2H22l-7.61 8.7L23.5 22h-6.9l-5.4-6.52L5 22H2l8.17-9.34L.5 2h7l4.89 5.93L18.9 2Zm-2.42 18h1.38L7.64 4h-1.4l10.24 16Z"/></svg>
              </a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  
    <!-- Middle row: logo + account/cart -->
    <div class="pw-mid">
      <div class="pw-container">
        <div class="pw-mid" style="padding:0">
          <a class="pw-logo" href="{{ routes.root_url }}" aria-label="Home">
            {% if section.settings.logo != blank %}
              <img src="{{ section.settings.logo | image_url: width: 260 }}" alt="{{ shop.name }}">
            {% else %}
              <strong>{{ shop.name }}</strong>
            {% endif %}
          </a>
  
          <div class="pw-cta">
            <a href="{% if customer %}{{ routes.account_url }}{% else %}{{ routes.account_login_url }}{% endif %}">
              <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-5 0-9 2.5-9 5.5V22h18v-2.5C21 16.5 17 14 12 14Z"/></svg>
              <span class="label">{% if customer %}My Account{% else %}Sign in / Join Free{% endif %}</span>
            </a>
  
            <a href="{{ routes.cart_url }}">
              <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M7 18a2 2 0 1 0 2 2 2 2 0 0 0-2-2Zm10 0a2 2 0 1 0 2 2 2 2 0 0 0-2-2ZM7.2 6l.6 3h10.9a1 1 0 0 1 .98 1.2l-1.3 6a2 2 0 0 1-2 .8H8.3a2 2 0 0 1-2-1.6L4.3 4H2V2h3a1 1 0 0 1 1 .8L7.2 6Z"/></svg>
              {% if cart != empty and cart.item_count > 0 %}
                <span class="pw-cart-count">{{ cart.item_count }}</span>
              {% endif %}
              <span class="label">Cart</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Main navigation -->
    <div class="pw-mainnav">
      <div class="pw-container">
        <button class="pw-hamburger" aria-label="Toggle menu" aria-controls="pw-menu-{{ section.id }}" aria-expanded="false">
          <span></span><span></span><span></span>
        </button>
        <nav id="pw-menu-{{ section.id }}" class="pw-menu" aria-label="Main menu">
          {% if section.settings.main_menu != blank %}
            {% for link in linklists[section.settings.main_menu].links %}
              <a href="{{ link.url }}">{{ link.title }}</a>
            {% endfor %}
          {% endif %}
        </nav>
      </div>
    </div>
  
    <script>
      (function(){
        var btn = document.currentScript.parentElement.querySelector('.pw-hamburger');
        var menu = document.currentScript.parentElement.querySelector('.pw-menu');
        if(!btn||!menu) return;
        btn.addEventListener('click', function(){
          var open = menu.classList.toggle('show');
          btn.setAttribute('aria-expanded', open ? 'true' : 'false');
        });
      })();
    </script>
  </section>
  
  {% schema %}
  {
    "name": "Custom Header (1200px)",
    "settings": [
      { "type": "image_picker", "id": "logo", "label": "Logo" },
      { "type": "text", "id": "help_text", "label": "Need help text", "default": "Need help?" },
      { "type": "text", "id": "help_email", "label": "Help email", "default": "support@example.com" },
  
      { "type": "link_list", "id": "upper_menu", "label": "Upper menu" },
      { "type": "link_list", "id": "main_menu", "label": "Main menu" },
  
      { "type": "url", "id": "facebook_url", "label": "Facebook URL" },
      { "type": "url", "id": "instagram_url", "label": "Instagram URL" },
      { "type": "url", "id": "x_url", "label": "X (Twitter) URL" },
  
      { "type": "color", "id": "topbar_bg", "label": "Topbar background", "default": "#ffffff" },
      { "type": "color", "id": "topbar_text_color", "label": "Topbar text color", "default": "#111111" },
      { "type": "color", "id": "topbar_link_color", "label": "Topbar link color", "default": "#0a3a8e" },
  
      { "type": "color", "id": "mid_link_color", "label": "Account/Cart link color", "default": "#0a3a8e" },
  
      { "type": "color", "id": "mainnav_bg_color", "label": "Main nav background", "default": "#072f77" },
      { "type": "color", "id": "mainnav_link_color", "label": "Main nav link color", "default": "#ffffff" },
  
      { "type": "color", "id": "cart_badge_bg", "label": "Cart badge background", "default": "#ff3b30" },
      { "type": "color", "id": "cart_badge_color", "label": "Cart badge text color", "default": "#ffffff" }
    ],
    "blocks": [],
    "presets": [
      { "name": "Custom Header (1200px)", "category": "Header" }
    ]
  }
  {% endschema %}
  